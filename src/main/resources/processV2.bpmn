<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" xmlns:modeler="http://camunda.org/schema/modeler/1.0" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Web Modeler" exporterVersion="c173d94" modeler:executionPlatform="Camunda Cloud" modeler:executionPlatformVersion="8.3.0" camunda:diagramRelationId="836c2bb2-5b68-4350-94df-8de7c7b33406">
  <bpmn:process id="immatriculation2" name="immatriculation2" isExecutable="true">
    <bpmn:extensionElements>
      <zeebe:userTaskForm id="userTaskForm_0gv5k4f">{
  "components": [
    {
      "label": "unique id",
      "type": "textfield",
      "layout": {
        "row": "Row_01981q1",
        "columns": null
      },
      "id": "Field_0ojcato",
      "key": "uid",
      "readonly": false,
      "disabled": false,
      "validate": {
        "required": true
      }
    }
  ],
  "type": "default",
  "id": "Form_uid",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.2.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.12.1"
  },
  "schemaVersion": 9
}</zeebe:userTaskForm>
      <zeebe:userTaskForm id="userTaskForm_2h8jupr">{
  "components": [
    {
      "label": "country_name",
      "type": "textfield",
      "layout": {
        "row": "Row_1qyn5fv",
        "columns": null
      },
      "id": "Field_1k1hf8j",
      "key": "country_name",
      "disabled": false,
      "readonly": true
    },
    {
      "label": "phone_number",
      "type": "textfield",
      "layout": {
        "row": "Row_1goq2zh",
        "columns": null
      },
      "id": "Field_0wam2uh",
      "key": "phone_number",
      "disabled": false,
      "readonly": true
    },
    {
      "label": "carrier",
      "type": "textfield",
      "layout": {
        "row": "Row_09jg5su",
        "columns": null
      },
      "id": "Field_16z2pyg",
      "key": "carrier",
      "disabled": false,
      "readonly": true
    },
    {
      "label": "activity_score",
      "type": "textfield",
      "layout": {
        "row": "Row_0kybwr2",
        "columns": null
      },
      "id": "Field_1crr4y7",
      "key": "activity_score",
      "disabled": false,
      "readonly": true
    }
  ],
  "type": "default",
  "id": "Form_16msqen",
  "executionPlatform": "Camunda Cloud",
  "executionPlatformVersion": "8.2.0",
  "exporter": {
    "name": "Camunda Modeler",
    "version": "5.12.1"
  },
  "schemaVersion": 9
}</zeebe:userTaskForm>
    </bpmn:extensionElements>
    <bpmn:startEvent id="StartEvent_1" name="want to makeÂ  registration request">
      <bpmn:outgoing>Flow_0sxlif8</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Activity_1bd1fwr" name="check uid" zeebe:modelerTemplate="io.camunda.connectors.HttpJson.v2" zeebe:modelerTemplateIcon="data:image/svg+xml;utf8,%3Csvg%20width%3D%2218%22%20height%3D%2218%22%20viewBox%3D%220%200%2018%2018%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Cpath%20d%3D%22M17.0335%208.99997C17.0335%2013.4475%2013.4281%2017.0529%208.98065%2017.0529C4.53316%2017.0529%200.927765%2013.4475%200.927765%208.99997C0.927765%204.55248%204.53316%200.947083%208.98065%200.947083C13.4281%200.947083%2017.0335%204.55248%2017.0335%208.99997Z%22%20fill%3D%22%23505562%22%2F%3E%0A%3Cpath%20d%3D%22M4.93126%2014.1571L6.78106%203.71471H10.1375C11.1917%203.71471%2011.9824%203.98323%2012.5095%204.52027C13.0465%205.04736%2013.315%205.73358%2013.315%206.57892C13.315%207.44414%2013.0714%208.15522%2012.5841%208.71215C12.1067%209.25913%2011.4553%209.63705%2010.6298%209.8459L12.0619%2014.1571H10.3315L9.03364%2010.0249H7.24351L6.51254%2014.1571H4.93126ZM7.49711%208.59281H9.24248C9.99832%208.59281%2010.5901%208.42374%2011.0177%208.08561C11.4553%207.73753%2011.6741%207.26513%2011.6741%206.66842C11.6741%206.19106%2011.5249%205.81811%2011.2265%205.54959C10.9282%205.27113%2010.4558%205.1319%209.80936%205.1319H8.10874L7.49711%208.59281Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E%0A">
      <bpmn:extensionElements>
        <zeebe:taskDefinition type="io.camunda:http-json:1" />
        <zeebe:ioMapping>
          <zeebe:input source="noAuth" target="authentication.type" />
          <zeebe:input source="get" target="method" />
          <zeebe:input source="https://phone-intelligence-api.p.rapidapi.com/3.0/phone_intel" target="url" />
          <zeebe:input source="={&#34;phone&#34;:uid,&#34;country_hint&#34;:&#34;US&#34;}" target="queryParameters" />
          <zeebe:input source="={&#34;X-RapidAPI-Key&#34;:&#34;5565221702msh056e41e74ca8770p1f9bd6jsndeb82f6269b6&#34;,&#34;X-RapidAPI-Host&#34;:&#34;phone-intelligence-api.p.rapidapi.com&#34;}" target="headers" />
          <zeebe:input source="20" target="connectionTimeoutInSeconds" />
        </zeebe:ioMapping>
        <zeebe:taskHeaders>
          <zeebe:header key="resultExpression" value="={phone_number:response.body.phone_number,activity_score:response.body.activity_score,is_valid:response.body.is_valid,carrier:response.body.carrier,country_name:response.body.country_name}" />
        </zeebe:taskHeaders>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_18cpgue</bpmn:incoming>
      <bpmn:outgoing>Flow_0f0t5a3</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="Activity_1uzb4w3" name="provide uid">
      <bpmn:extensionElements>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_0gv5k4f" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1vk1zxn</bpmn:incoming>
      <bpmn:outgoing>Flow_18cpgue</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="Flow_18cpgue" sourceRef="Activity_1uzb4w3" targetRef="Activity_1bd1fwr" />
    <bpmn:exclusiveGateway id="Gateway_01it0fd">
      <bpmn:incoming>Flow_0f0t5a3</bpmn:incoming>
      <bpmn:outgoing>Flow_1ghkk19</bpmn:outgoing>
      <bpmn:outgoing>Flow_0vg4zbe</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0f0t5a3" sourceRef="Activity_1bd1fwr" targetRef="Gateway_01it0fd" />
    <bpmn:sequenceFlow id="Flow_1ghkk19" name="non valid" sourceRef="Gateway_01it0fd" targetRef="Gateway_1e91glg">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=is_valid=false</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0vg4zbe" name="valid" sourceRef="Gateway_01it0fd" targetRef="Activity_0cpjtoo">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">=is_valid=true</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="Activity_0cpjtoo" name="create request">
      <bpmn:extensionElements>
        <zeebe:formDefinition formKey="camunda-forms:bpmn:userTaskForm_2h8jupr" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0vg4zbe</bpmn:incoming>
      <bpmn:outgoing>Flow_0d1vjoy</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="Event_1l7njr3" name="end">
      <bpmn:incoming>Flow_0d1vjoy</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0d1vjoy" sourceRef="Activity_0cpjtoo" targetRef="Event_1l7njr3" />
    <bpmn:exclusiveGateway id="Gateway_1e91glg">
      <bpmn:incoming>Flow_0sxlif8</bpmn:incoming>
      <bpmn:incoming>Flow_1ghkk19</bpmn:incoming>
      <bpmn:outgoing>Flow_1vk1zxn</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_0sxlif8" sourceRef="StartEvent_1" targetRef="Gateway_1e91glg" />
    <bpmn:sequenceFlow id="Flow_1vk1zxn" sourceRef="Gateway_1e91glg" targetRef="Activity_1uzb4w3" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="immatriculation2">
      <bpmndi:BPMNShape id="Activity_1ftal1m_di" bpmnElement="Activity_1bd1fwr">
        <dc:Bounds x="490" y="78" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_01it0fd_di" bpmnElement="Gateway_01it0fd" isMarkerVisible="true">
        <dc:Bounds x="725" y="93" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0gg78m9_di" bpmnElement="Activity_0cpjtoo">
        <dc:Bounds x="910" y="78" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1l7njr3_di" bpmnElement="Event_1l7njr3">
        <dc:Bounds x="1152" y="100" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1161" y="143" width="19" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">
        <dc:Bounds x="132" y="100" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="116" y="143" width="68" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1e91glg_di" bpmnElement="Gateway_1e91glg" isMarkerVisible="true">
        <dc:Bounds x="195" y="93" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0yb3bzd_di" bpmnElement="Activity_1uzb4w3">
        <dc:Bounds x="280" y="78" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_18cpgue_di" bpmnElement="Flow_18cpgue">
        <di:waypoint x="380" y="118" />
        <di:waypoint x="490" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0f0t5a3_di" bpmnElement="Flow_0f0t5a3">
        <di:waypoint x="590" y="118" />
        <di:waypoint x="725" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ghkk19_di" bpmnElement="Flow_1ghkk19">
        <di:waypoint x="750" y="143" />
        <di:waypoint x="750" y="240" />
        <di:waypoint x="220" y="240" />
        <di:waypoint x="220" y="150" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="463" y="222" width="45" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0vg4zbe_di" bpmnElement="Flow_0vg4zbe">
        <di:waypoint x="775" y="118" />
        <di:waypoint x="910" y="118" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="832" y="100" width="22" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0d1vjoy_di" bpmnElement="Flow_0d1vjoy">
        <di:waypoint x="1010" y="118" />
        <di:waypoint x="1152" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sxlif8_di" bpmnElement="Flow_0sxlif8">
        <di:waypoint x="168" y="118" />
        <di:waypoint x="195" y="118" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vk1zxn_di" bpmnElement="Flow_1vk1zxn">
        <di:waypoint x="245" y="118" />
        <di:waypoint x="280" y="118" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
